$(document).ready(draw());

function draw(){
	var date=[];
	var orderNum=[];
	var cancelNum=[];
	var enterNum=[];
	var leaveNum=[];
	$.ajax({
        type: "get",
        url: "http://localhost:8080/hw/getAllHchecks",
        
        success: function(data){
        	var da=eval("("+data+")");
        	for(var i=0;i<da.checks.length;i++){
        		date[i]=da.checks[i].date;
        		
        		orderNum[i]=da.checks[i].orderNum;
        		cancelNum[i]=da.checks[i].cancelNum;
        		enterNum[i]=da.checks[i].enterNum;
        		leaveNum[i]=da.checks[i].leaveNum;
        		
        	}
        	drawOandC(date,orderNum,cancelNum);
//        	drawEandL(date,enterNum,leaveNum);
        	

           }
     });
	
	
	
}

function drawOandC(date,orderNum,cancelNum){
//	alert("a");
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById("OandC"));
//    alert(date);
//    var a=[date];
//    alert(a);
//    alert(["2017"]);
//    var b=[ordername];
    // 指定图表的配置项和数据
    var option = {
        title: {
            text: '预定/取消预定情况图'
        },
        tooltip : {  
            trigger: 'axis'  
        }, 
        legend: {
        	data:['预定数','取消数']
        },
        toolbox: {
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        dataZoom: [
            {
                type: 'slider',
                show: true,
                xAxisIndex: [0],
                start: 1,
                end: 35
            },
            {
                type: 'slider',
                show: true,
                yAxisIndex: [0],
                left: '93%',
                start: 29,
                end: 36
            },
            {
                type: 'inside',
                xAxisIndex: [0],
                start: 1,
                end: 35
            },
            {
                type: 'inside',
                yAxisIndex: [0],
                start: 29,
                end: 36
            }
        ], 
       
//        grid: {  
//            left: '3%',  
//            right: '4%',  
//            bottom: '3%',  
//            containLabel: true  
//        },
        xAxis : [  
            {  
                type : 'category',  
                boundaryGap : false,  
                data : date  
            }  
        ],  
        yAxis : [  
            {  	name:'房间数(间)',
                type : 'value', 
                title:'房间数'
            }  
        ],
        series : [  
            {  
                name:'预定数',  
                type:'line',  
//                stack: '房间数',  
//                areaStyle: {normal: {}},  
                data:orderNum
            },  
            {  
                name:'取消数',  
                type:'line',  
//                stack: '房间数',  
//                areaStyle: {normal: {}},  
                data:cancelNum  
            }  
        ]  
    };

    // 使用刚指定的配置项和数据显示图表。
    
    myChart.setOption(option);

}