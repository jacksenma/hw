$(document).ready(draw());
var date=[];
var orderNum=[];
var cancelNum=[];
var enterNum=[];
var leaveNum=[];
//var myChart;

function draw(){
//	var myChart = echarts.init(document.getElementById("OandC"));
//	myChart.showLoading();
	$.ajax({
        type: "get",
        url: "http://localhost:8080/hw/getAllHchecks",
        
        success: function(data){
        	var da=eval("("+data+")");
        	for(var i=0;i<da.checks.length;i++){
        		date[i]=da.checks[i].date;
        		
        		orderNum[i]=da.checks[i].orderNum;
        		cancelNum[i]=da.checks[i].cancelNum;
        		
        	}
        	drawOandC(date,orderNum,cancelNum);
        	
        	for(var i=0;i<da.checks.length;i++){
        		enterNum[i]=da.checks[i].enterNum;
        		leaveNum[i]=da.checks[i].leaveNum;
        		
        	}
        	
        	drawEandL(date,enterNum,leaveNum);
        	}
     });
	
	
	
}

function drawOandC(date,orderNum,cancelNum){
    // 基于准备好的dom，初始化echarts实例
    // 指定图表的配置项和数据
	var myChart = echarts.init(document.getElementById("OandC"));
//	myChart.showLoading();
    var option = {
        title: {
            text: '预定/取消预定情况图'
        },
        tooltip : {  
            trigger: 'axis'  
        }, 
        legend: {
        	data:['预定数','取消数']
        },
        toolbox: {
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        dataZoom: [
            {
                type: 'slider',
                show: true,
                xAxisIndex: [0],
                start: 0,
                end: 100
            },
            {
                type: 'slider',
                show: true,
                yAxisIndex: [0],
                left: '93%',
                start: 0,
                end: 100
            },
            {
                type: 'inside',
                xAxisIndex: [0],
                start: 0,
                end: 100
            },
            {
                type: 'inside',
                yAxisIndex: [0],
                start: 0,
                end: 100
            }
        ], 
       
//        grid: {  
//            left: '3%',  
//            right: '4%',  
//            bottom: '3%',  
//            containLabel: true  
//        },
        xAxis : [  
            {  
                type : 'category',  
                boundaryGap : false,  
                data : date  
            }  
        ],  
        yAxis : [  
            {  	name:'房间数(间)',
                type : 'value', 
                title:'房间数'
            }  
        ],
        series : [  
            {  
                name:'预定数',  
                type:'line',  
//                stack: '房间数',  
//                areaStyle: {normal: {}},  
                data:orderNum
            },  
            {  
                name:'取消数',  
                type:'line',  
//                stack: '房间数',  
//                areaStyle: {normal: {}},  
                data:cancelNum  
            }  
        ]  
    };

    // 使用刚指定的配置项和数据显示图表。
    
    myChart.setOption(option);
//    myChart.hideLoading();

}


function drawEandL(date,enterNum,leaveNum){
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById("EandL"));
//    myChart.showLoading();
    // 指定图表的配置项和数据
    var option = {
        title: {
            text: '入住/退房情况图'
        },
        tooltip : {  
            trigger: 'axis'  
        }, 
        legend: {
        	data:['入住数','退房数']
        },
        toolbox: {
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        dataZoom: [
            {
                type: 'slider',
                show: true,
                xAxisIndex: [0],
                start: 0,
                end: 100
            },
            {
                type: 'slider',
                show: true,
                yAxisIndex: [0],
                left: '93%',
                start: 0,
                end: 100
            },
            {
                type: 'inside',
                xAxisIndex: [0],
                start: 0,
                end: 100
            },
            {
                type: 'inside',
                yAxisIndex: [0],
                start: 0,
                end: 100
            }
        ], 
       
//        grid: {  
//            left: '3%',  
//            right: '4%',  
//            bottom: '3%',  
//            containLabel: true  
//        },
        xAxis : [  
            {  
                type : 'category',  
                boundaryGap : false,  
                data : date  
            }  
        ],  
        yAxis : [  
            {  	name:'房间数(间)',
                type : 'value', 
                title:'房间数'
            }  
        ],
        series : [  
            {  
                name:'入住数',  
                type:'line',  
//                stack: '房间数',  
//                areaStyle: {normal: {}},  
                data:enterNum
            },  
            {  
                name:'退房数',  
                type:'line',  
//                stack: '房间数',  
//                areaStyle: {normal: {}},  
                data:leaveNum  
            }  
        ]  
    };

    // 使用刚指定的配置项和数据显示图表。
    
    myChart.setOption(option);
//    myChart.hideLoading();

}
$("p").mouseenter(function(){
	  $("p").css("background-color","yellow");
	});

function drawFinance(){
	var myChart = echarts.init(document.getElementById("Finance"));
	var fdate=[];
	var money=[];
	$.ajax({
        type: "get",
        url: "http://localhost:8080/hw/getHostelFinance",
        
        success: function(data){
        	var da=eval("("+data+")");
        	for(var i=0;i<da.finance.length;i++){
        		fdate[i]=da.finance[i].date;
        		
        		money[i]=da.finance[i].money;
        		
        		
        	}
//        	drawFinance(date,orderNum,cancelNum);
        	var option = {
        		      title: {
        		          text: '财务明细情况图'
        		      },
        		      tooltip : {  
        		          trigger: 'axis'  
        		      }, 
        		      legend: {
        		      	data:['收入']
        		      },
        		      toolbox: {
        		          feature: {
        		              dataZoom: {
        		                  yAxisIndex: 'none'
        		              },
        		              restore: {},
        		              saveAsImage: {}
        		          }
        		      },
        		      dataZoom: [
        		          {
        		              type: 'slider',
        		              show: true,
        		              xAxisIndex: [0],
        		              start: 0,
        		              end: 100
        		          },
        		          {
        		              type: 'slider',
        		              show: true,
        		              yAxisIndex: [0],
        		              left: '93%',
        		              start: 0,
        		              end: 100
        		          },
        		          {
        		              type: 'inside',
        		              xAxisIndex: [0],
        		              start: 0,
        		              end: 100
        		          },
        		          {
        		              type: 'inside',
        		              yAxisIndex: [0],
        		              start: 0,
        		              end: 100
        		          }
        		      ], 
        		     
//        		      grid: {  
//        		          left: '3%',  
//        		          right: '4%',  
//        		          bottom: '3%',  
//        		          containLabel: true  
//        		      },
        		      xAxis : [  
        		          {  
        		              type : 'category',  
        		              boundaryGap : false,  
        		              data : fdate  
        		          }  
        		      ],  
        		      yAxis : [  
        		          {  	name:'收入(元)',
        		              type : 'value', 
        		              title:'收入'
        		          }  
        		      ],
        		      series : [  
        		          {  
        		              name:'收入',  
        		              type:'line',  
//        		              stack: '房间数',  
//        		              areaStyle: {normal: {}},  
        		              data:money
        		          }
        		      ]  
        		  };

        		  // 使用刚指定的配置项和数据显示图表。
        		  
        		  myChart.setOption(option);
        	
        	}
     });
//  myChart.showLoading();
  // 指定图表的配置项和数据
  
}